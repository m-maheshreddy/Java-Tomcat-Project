
def getProjectName() {
    return 'Java-Tomcat-Project'
}

def getJDKVersion() {
    return 'jdk1.8.0_25'
}

def getMavenConfig() {
    return 'maven-config'
}

def getMavenLocation() {
    return 'M2_HOME'
}

pipeline {
    agent any
	
	 tools { 
        maven "maven_3.5.4" 
	jdk "JDK_8"	 
        }
	
    stages {
        stage ('Clone') {
            steps {
                git branch: 'master', url: "https://github.com/m-maheshreddy/Java-Tomcat-Project.git"
            }
        }
	    
	 stage('Build') {
            steps {
                script {
                 bat 'mvn clean install'
		}
	      }
	  }   
	    
	 stage('Test') {
            steps {
                script {
                 bat 'mvn test'
		}
	      }
	  }   
	    
	    stage('Tomcat Deploy') {
            steps {
                script {
                 bat 'copy "C:\\Windows\\System32\\config\\systemprofile\\AppData\\Local\\Jenkins\\.jenkins\\workspace\\java-tomcat-pipeline\\webapp\\target\\webapp.war" "C:\\Program Files\\Apache Software Foundation\\Tomcat 8.5\\webapps\\"'	
		}
	      }
	  } 
		
	}
}
